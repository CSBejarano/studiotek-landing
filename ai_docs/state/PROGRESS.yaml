# PROGRESS.yaml - Estado del proyecto
# Project: studiotek-landing
# Updated: 2026-01-26

workflow_id: "2026-01-26_session-sync"
status: "IDLE"
started_at: "2026-01-26T00:00:00Z"
completed_at: null

# Estado actual: Landing completa, listo para nuevas tareas
current_state:
  phase: "IDLE"
  description: "Landing page 100% completa con todos los features"
  last_workflow: "2026-01-24_fix-chat-ia-movil-4bugs"

# Ultimo workflow completado: Fix Chat IA Movil - 4 Bugs
last_workflow:
  id: "2026-01-24_fix-chat-ia-movil-4bugs"
  status: "COMPLETE"
  started_at: "2026-01-24T16:00:00Z"
  completed_at: "2026-01-24T18:15:00Z"
  phases:
    - id: 1
      name: "Fix Status Indicators Overlap"
      agent: "@frontend"
      status: "COMPLETE"
      description: "Single AnimatePresence mode='wait' con computed status key"
      result: "SUCCESS - No overlap entre indicadores"

    - id: 2
      name: "Fix Input Reset After Voice"
      agent: "@frontend"
      status: "COMPLETE"
      description: "setValue('') despues de onVoiceEnd en recognition y Whisper"
      result: "SUCCESS - Input se limpia correctamente"

    - id: 3
      name: "Fix TTS iOS Playback"
      agent: "@frontend"
      status: "COMPLETE"
      description: "TTS funciona para todos los inputs (voz y texto)"
      result: "SUCCESS - Audio TTS se reproduce en todos los casos"

    - id: 4
      name: "Fix Placeholder Mobile"
      agent: "@frontend"
      status: "COMPLETE"
      description: "Placeholder no se trunca en movil, se oculta durante procesamiento"
      result: "SUCCESS - UX mejorada en movil"

    - id: 5
      name: "Deploy"
      agent: "@infra"
      status: "COMPLETE"
      description: "git push a main"
      result: "SUCCESS - commits 655f36c pushed"

# Metricas del ultimo workflow
metrics:
  total_phases: 5
  completed_phases: 5
  skipped_phases: 0
  duration_minutes: 135
  agents_used: ["@frontend", "@infra"]
  files_created: 0
  files_modified: 2

# Git - Ultimos commits
git:
  branch: "main"
  remote: "https://github.com/CSBejarano/studiotek-landing"
  commits:
    - hash: "b8dda91"
      message: "feat: Apple-style service cards + performance optimization"
    - hash: "655f36c"
      message: "fix: TTS for voice input + hide placeholder during processing"
    - hash: "220f1db"
      message: "fix: enable TTS for all responses (voice and text input)"
    - hash: "1cf9f86"
      message: "fix: placeholder truncation - remove unnecessary right padding"
    - hash: "39fad9e"
      message: "fix: TTS response for voice input + placeholder overflow on mobile"

# PRD Progress
prd_progress:
  total_phases: 10
  completed_phases: 10
  status: "100% COMPLETE + VOICE AGENT + AI CHAT ENHANCED + MOBILE FIXES"

# Integraciones
integrations:
  supabase:
    status: "ACTIVE"
    table: "leads"
    rls: true
    service_role: true
  openai:
    status: "ACTIVE"
    models: ["gpt-4o-mini", "tts-1", "whisper-1"]
    features: ["chat", "function_calling", "tts", "stt"]
  resend:
    status: "PENDING"
    api_key: false
  vercel:
    status: "ACTIVE"
    url: "https://studiotek-landing-fsw63i0gi-csbejaranos-projects.vercel.app"
  github:
    status: "ACTIVE"
    repo: "https://github.com/CSBejarano/studiotek-landing"
  gemini:
    status: "ACTIVE"
    model: "imagen-4.0-generate-001"
    images_generated: 15

# Voice Agent Components
voice_agent:
  components:
    - "components/voice/VoiceAgent.tsx"
    - "components/voice/VoiceButton.tsx"
    - "components/voice/TranscriptWindow.tsx"
    - "components/voice/VoiceAgentProvider.tsx"
    - "components/ui/ai-chat-input.tsx"
    - "components/ui/HeroAIChat.tsx"
  hooks:
    - "hooks/useSpeechRecognition.ts"
    - "hooks/useVoiceAgent.ts"
  apis:
    - "app/api/voice/chat/route.ts"
    - "app/api/voice/tts/route.ts"
    - "app/api/voice/stt/route.ts"
  lib:
    - "lib/voice/types.ts"
    - "lib/voice/prompts.ts"
    - "lib/voice/functions.ts"
    - "lib/voice/functionHandlers.ts"
  features:
    - "Web Speech API (speech-to-text) - PRIMARY"
    - "OpenAI Whisper (speech-to-text) - FALLBACK"
    - "Hybrid voice recognition with auto-fallback"
    - "Real-time transcription (2.5s intervals in Whisper mode)"
    - "Expandable textarea input (max 150px)"
    - "OpenAI Chat API with function calling"
    - "OpenAI TTS API (voice: onyx)"
    - "Text input fallback"
    - "Mic pause/resume button"
    - "Visual indicators: green (Web Speech) / red (Whisper)"
    - "Mobile microphone support (iOS Safari + Android)"
    - "TTS for all response types (voice and text input)"
  functions:
    - "navigate_to_section"
    - "open_service_modal"
    - "highlight_element"
    - "fill_form_field"
    - "submit_contact_form"

# AI Chat Input Component
ai_chat_input:
  file: "components/ui/ai-chat-input.tsx"
  features:
    - "Hybrid voice recognition"
    - "Web Speech API (green indicator)"
    - "Whisper fallback (red indicator)"
    - "Periodic transcription every 2.5s"
    - "Auto-resizing textarea"
    - "Max height 150px"
    - "Animated placeholder"
    - "Centered layout"
    - "Mobile-optimized placeholder (no truncation)"
    - "Single AnimatePresence for status indicators"
  refs:
    - "textareaRef"
    - "transcriptionIntervalRef"
    - "isTranscribingRef"
    - "mimeTypeRef"

# Domain Experts
domain_experts:
  frontend:
    version: "1.32"
    tasks_handled: 57
  backend:
    version: "1.3"
    tasks_handled: 6
  infra:
    version: "1.5"
    tasks_handled: 8
  testing:
    version: "1.0"
    tasks_handled: 4

# Completion Promise
completion_promise: "Landing Complete - Ready for New Features"
