# Agent Registry v2.0
# Configuration for domain expert agents
# Each agent has: profile, keywords, patterns, and preferences

version: "2.0"

agents:
  backend:
    display_name: "Backend Expert"
    description: "FastAPI, SQLAlchemy, async patterns, Clean Architecture"
    keywords:
      primary:
        - fastapi
        - api
        - endpoint
        - route
        - handler
        - controller
        - service
        - use case
        - repository
      secondary:
        - async
        - await
        - dependency injection
        - middleware
    file_patterns:
      - "**/app/**"
      - "**/src/**"
      - "**/*_service.py"
      - "**/*_use_case.py"
      - "**/*_repository.py"
    tools_preferred:
      - Read
      - Edit
      - Grep
    anti_patterns:
      - "Business logic in controllers"
      - "N+1 queries"
      - "Missing error handling"

  frontend:
    display_name: "Frontend Expert"
    description: "React, Vue, TypeScript, Tailwind CSS, component architecture"
    keywords:
      primary:
        - react
        - vue
        - component
        - ui
        - css
        - tailwind
      secondary:
        - hook
        - state
        - props
        - styled
        - responsive
    file_patterns:
      - "**/components/**"
      - "**/*.tsx"
      - "**/*.jsx"
      - "**/*.vue"
      - "**/*.css"
    tools_preferred:
      - Read
      - Edit
      - Write
    anti_patterns:
      - "Prop drilling"
      - "Giant components"
      - "Inline styles everywhere"

  database:
    display_name: "Database Expert"
    description: "PostgreSQL, SQLAlchemy, migrations, RLS, indexing"
    keywords:
      primary:
        - sql
        - migration
        - alembic
        - schema
        - table
        - index
        - query
        - rls
      secondary:
        - postgres
        - database
        - model
        - constraint
        - foreign key
    file_patterns:
      - "**/migrations/**"
      - "**/models/**"
      - "**/*_model.py"
      - "**/database/**"
    tools_preferred:
      - Read
      - Edit
      - Bash
    anti_patterns:
      - "Missing indexes on foreign keys"
      - "N+1 queries"
      - "Raw SQL without parameterization"

  testing:
    display_name: "Testing Expert"
    description: "Pytest, mocking, fixtures, coverage, TDD"
    keywords:
      primary:
        - test
        - pytest
        - mock
        - fixture
        - coverage
        - unit
        - integration
      secondary:
        - e2e
        - assert
        - conftest
        - parametrize
    file_patterns:
      - "**/tests/**"
      - "**/*_test.py"
      - "**/test_*.py"
      - "**/conftest.py"
    tools_preferred:
      - Read
      - Edit
      - Bash
    anti_patterns:
      - "Flaky tests"
      - "Missing assertions"
      - "Test pollution between tests"

  api:
    display_name: "API Expert"
    description: "REST, GraphQL, OpenAPI, request/response handling"
    keywords:
      primary:
        - rest
        - graphql
        - openapi
        - swagger
        - endpoint
        - request
        - response
      secondary:
        - json
        - http
        - status code
        - pagination
        - versioning
    file_patterns:
      - "**/api/**"
      - "**/routes/**"
      - "**/schemas/**"
      - "**/endpoints/**"
    tools_preferred:
      - Read
      - Edit
      - WebFetch
    anti_patterns:
      - "Missing input validation"
      - "Inconsistent response format"
      - "No API versioning"

  security:
    display_name: "Security Expert"
    description: "Authentication, authorization, OWASP, JWT, RBAC"
    keywords:
      primary:
        - auth
        - jwt
        - permission
        - rbac
        - owasp
        - vulnerability
        - token
      secondary:
        - password
        - encryption
        - security
        - cors
        - csrf
    file_patterns:
      - "**/auth/**"
      - "**/security/**"
      - "**/middleware/**"
    tools_preferred:
      - Read
      - Grep
      - Edit
    anti_patterns:
      - "Hardcoded secrets"
      - "SQL injection vectors"
      - "XSS vulnerabilities"
      - "Missing rate limiting"

  infra:
    display_name: "Infrastructure Expert"
    description: "Docker, Kubernetes, CI/CD, Terraform, deployment"
    keywords:
      primary:
        - docker
        - kubernetes
        - k8s
        - ci
        - cd
        - deploy
        - terraform
      secondary:
        - nginx
        - redis
        - github actions
        - pipeline
        - helm
    file_patterns:
      - "**/Dockerfile*"
      - "**/*.yaml"
      - "**/.github/**"
      - "**/deploy/**"
      - "**/infra/**"
    tools_preferred:
      - Read
      - Edit
      - Bash
    anti_patterns:
      - "Secrets in source code"
      - "Missing health checks"
      - "No resource limits"

# Matching configuration
matching:
  min_confidence: 0.3
  keyword_weight: 0.6
  pattern_weight: 0.4
  fallback_domain: backend
